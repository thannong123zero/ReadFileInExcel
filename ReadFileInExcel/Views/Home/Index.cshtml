@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
    <div id="imageContainer">
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
         // Image URL
         const imageUrl = "https://cdn.pixabay.com/photo/2024/02/22/00/27/iguana-8588842_1280.jpg";

         // Fetch the image as a blob
         fetch(imageUrl)
             .then(response => {
                 if (!response.ok) {
                     throw new Error("Failed to fetch image");
                 }
                 return response.blob(); // Convert response to blob
             })
             .then(blob => {
                 // Create an object URL for the blob
                 const blobUrl = URL.createObjectURL(blob);

                 // Create an <img> element and set its src to the blob URL
                 const img = document.createElement("img");
                 img.src = blobUrl;
                 img.alt = "Fetched Image";
                 img.style.maxWidth = "300px"; // Optional styling
                 img.style.marginTop = "20px";

                 // Append the image to the container
                 document.getElementById("imageContainer").appendChild(img);

                 // Optional: Revoke the URL after some time
                 setTimeout(() => {
                     URL.revokeObjectURL(blobUrl); // Clean up memory
                     console.log("Blob URL revoked");
                 }, 10000);
             })
             .catch(error => {
                 console.error("Error fetching image:", error);
                 document.getElementById("imageContainer").textContent = "Failed to load the image.";
             });
     });
</script>

